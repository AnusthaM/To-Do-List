<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Todo List App</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
    <style>
        * {
            font-family: 'Inter', sans-serif;
        }
        .task-item:hover .task-actions {
            opacity: 1;
        }
        .checkbox-custom:checked + .checkmark {
            background-color: #10b981;
            border-color: #10b981;
        }
        .checkbox-custom:checked + .checkmark:after {
            display: block;
        }
        .checkmark:after {
            content: "";
            position: absolute;
            display: none;
            left: 5px;
            top: 1px;
            width: 5px;
            height: 10px;
            border: solid white;
            border-width: 0 2px 2px 0;
            transform: rotate(45deg);
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <!-- Header -->
        <header class="text-center mb-10">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">Todo List</h1>
            <p class="text-gray-600">Stay organized and get things done</p>
        </header>

        <div class="flex flex-col lg:flex-row gap-8">
            <!-- Left Panel: Add Task & Stats -->
            <div class="lg:w-2/5">
                <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                    <h2 class="text-2xl font-semibold text-gray-800 mb-6">Add New Task</h2>
                    
                    <div class="mb-6">
                        <label for="taskInput" class="block text-gray-700 mb-2">Task Title</label>
                        <input 
                            type="text" 
                            id="taskInput" 
                            placeholder="What needs to be done?" 
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent"
                        >
                    </div>
                    
                    <div class="mb-6">
                        <label for="taskCategory" class="block text-gray-700 mb-2">Category</label>
                        <select 
                            id="taskCategory" 
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent"
                        >
                            <option value="general">General</option>
                            <option value="work">Work</option>
                            <option value="personal">Personal</option>
                            <option value="shopping">Shopping</option>
                            <option value="health">Health</option>
                        </select>
                    </div>
                    
                    <div class="mb-8">
                        <label for="taskPriority" class="block text-gray-700 mb-2">Priority</label>
                        <div class="flex space-x-4">
                            <button 
                                data-priority="low" 
                                class="priority-btn flex-1 py-2 rounded-lg border border-gray-300 hover:bg-gray-50 bg-gray-100 text-gray-700"
                            >
                                Low
                            </button>
                            <button 
                                data-priority="medium" 
                                class="priority-btn flex-1 py-2 rounded-lg border border-gray-300 hover:bg-yellow-50 bg-yellow-100 text-yellow-700 border-yellow-300"
                            >
                                Medium
                            </button>
                            <button 
                                data-priority="high" 
                                class="priority-btn flex-1 py-2 rounded-lg border border-gray-300 hover:bg-red-50 bg-red-100 text-red-700 border-red-300"
                            >
                                High
                            </button>
                        </div>
                    </div>
                    
                    <button 
                        id="addTaskBtn" 
                        class="w-full bg-emerald-500 hover:bg-emerald-600 text-white font-medium py-3 px-4 rounded-lg transition duration-300 flex items-center justify-center"
                    >
                        <i class="fas fa-plus mr-2"></i> Add Task
                    </button>
                </div>
                
                <!-- Statistics -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h2 class="text-2xl font-semibold text-gray-800 mb-6">Task Statistics</h2>
                    <div class="grid grid-cols-2 gap-4 mb-6">
                        <div class="bg-gray-50 p-4 rounded-lg text-center">
                            <div class="text-3xl font-bold text-gray-800" id="totalTasks">0</div>
                            <div class="text-gray-600">Total Tasks</div>
                        </div>
                        <div class="bg-gray-50 p-4 rounded-lg text-center">
                            <div class="text-3xl font-bold text-emerald-600" id="completedTasks">0</div>
                            <div class="text-gray-600">Completed</div>
                        </div>
                    </div>
                    <div class="space-y-4">
                        <div>
                            <div class="flex justify-between mb-1">
                                <span class="text-gray-700">Completion Progress</span>
                                <span class="text-gray-700 font-medium" id="completionRate">0%</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2.5">
                                <div id="progressBar" class="bg-emerald-600 h-2.5 rounded-full" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Right Panel: Task List & Filters -->
            <div class="lg:w-3/5">
                <div class="bg-white rounded-xl shadow-lg p-6 h-full">
                    <!-- Filter Controls -->
                    <div class="flex flex-col sm:flex-row justify-between items-center mb-8">
                        <h2 class="text-2xl font-semibold text-gray-800 mb-4 sm:mb-0">Your Tasks</h2>
                        <div class="flex space-x-2">
                            <button 
                                data-filter="all" 
                                class="filter-btn px-4 py-2 rounded-lg bg-emerald-100 text-emerald-700 font-medium"
                            >
                                All
                            </button>
                            <button 
                                data-filter="active" 
                                class="filter-btn px-4 py-2 rounded-lg bg-gray-100 text-gray-700 font-medium hover:bg-gray-200"
                            >
                                Active
                            </button>
                            <button 
                                data-filter="completed" 
                                class="filter-btn px-4 py-2 rounded-lg bg-gray-100 text-gray-700 font-medium hover:bg-gray-200"
                            >
                                Completed
                            </button>
                        </div>
                    </div>
                    
                    <!-- Task List -->
                    <div id="taskList" class="mb-8">
                        <!-- Tasks will be dynamically inserted here -->
                        <div id="emptyState" class="text-center py-12">
                            <div class="text-gray-400 text-5xl mb-4">
                                <i class="fas fa-tasks"></i>
                            </div>
                            <h3 class="text-xl font-medium text-gray-600 mb-2">No tasks yet</h3>
                            <p class="text-gray-500">Add a task using the form on the left to get started!</p>
                        </div>
                    </div>
                    
                    <!-- Task Actions -->
                    <div class="flex justify-between items-center pt-6 border-t border-gray-200">
                        <div class="text-gray-600">
                            <span id="tasksRemaining">0</span> tasks remaining
                        </div>
                        <div>
                            <button 
                                id="clearCompletedBtn" 
                                class="px-4 py-2 text-gray-600 hover:text-gray-800 font-medium"
                            >
                                Clear Completed
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Footer -->
        <footer class="mt-12 text-center text-gray-500 text-sm">
            <p>Double-click a task to edit it | Click the checkbox to mark as complete</p>
        </footer>
    </div>
    <script>
        // DOM Elements
        const taskInput = document.getElementById('taskInput');
        const taskCategory = document.getElementById('taskCategory');
        const priorityButtons = document.querySelectorAll('.priority-btn');
        const addTaskBtn = document.getElementById('addTaskBtn');
        const taskList = document.getElementById('taskList');
        const emptyState = document.getElementById('emptyState');
        const filterButtons = document.querySelectorAll('.filter-btn');
        const clearCompletedBtn = document.getElementById('clearCompletedBtn');
        const totalTasksElement = document.getElementById('totalTasks');
        const completedTasksElement = document.getElementById('completedTasks');
        const completionRateElement = document.getElementById('completionRate');
        const progressBar = document.getElementById('progressBar');
        const tasksRemainingElement = document.getElementById('tasksRemaining');

        // State variables
        let tasks = JSON.parse(localStorage.getItem('tasks')) || [];
        let currentFilter = 'all';
        let selectedPriority = 'medium'; // Default priority

        // Initialize priority button selection
        document.addEventListener('DOMContentLoaded', () => {
            // Set medium as default selected priority
            priorityButtons.forEach(btn => {
                if (btn.dataset.priority === selectedPriority) {
                    btn.classList.add('bg-yellow-100', 'text-yellow-700', 'border-yellow-300');
                    btn.classList.remove('bg-gray-100', 'text-gray-700');
                }
                
                btn.addEventListener('click', () => {
                    // Remove active styles from all priority buttons
                    priorityButtons.forEach(b => {
                        b.classList.remove('bg-yellow-100', 'text-yellow-700', 'border-yellow-300');
                        b.classList.remove('bg-red-100', 'text-red-700', 'border-red-300');
                        b.classList.remove('bg-gray-100', 'text-gray-700', 'border-gray-300');
                        b.classList.add('bg-gray-100', 'text-gray-700', 'border-gray-300');
                    });
                    
                    // Add active styles to clicked button
                    selectedPriority = btn.dataset.priority;
                    if (selectedPriority === 'low') {
                        btn.classList.remove('bg-gray-100', 'text-gray-700', 'border-gray-300');
                        btn.classList.add('bg-gray-100', 'text-gray-700', 'border-gray-300');
                    } else if (selectedPriority === 'medium') {
                        btn.classList.remove('bg-gray-100', 'text-gray-700', 'border-gray-300');
                        btn.classList.add('bg-yellow-100', 'text-yellow-700', 'border-yellow-300');
                    } else if (selectedPriority === 'high') {
                        btn.classList.remove('bg-gray-100', 'text-gray-700', 'border-gray-300');
                        btn.classList.add('bg-red-100', 'text-red-700', 'border-red-300');
                    }
                });
            });
            
            // Load tasks from localStorage and render
            loadTasks();
            updateStats();
        });

        // Add task function
        addTaskBtn.addEventListener('click', addTask);

        // Also allow adding task with Enter key
        taskInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                addTask();
            }
        });

        function addTask() {
            const taskText = taskInput.value.trim();
            if (taskText === '') {
                alert('Please enter a task');
                return;
            }
            
            const newTask = {
                id: Date.now(),
                text: taskText,
                category: taskCategory.value,
                priority: selectedPriority,
                completed: false,
                createdAt: new Date().toISOString()
            };
            
            tasks.push(newTask);
            saveTasks();
            renderTasks();
            updateStats();
            
            // Clear input
            taskInput.value = '';
            taskInput.focus();
        }

        // Render tasks based on current filter
        function renderTasks() {
            // Filter tasks based on current filter
            let filteredTasks = tasks;
            if (currentFilter === 'active') {
                filteredTasks = tasks.filter(task => !task.completed);
            } else if (currentFilter === 'completed') {
                filteredTasks = tasks.filter(task => task.completed);
            }
            
            // If no tasks, show empty state
            if (filteredTasks.length === 0) {
                taskList.innerHTML = emptyState.outerHTML;
                return;
            }
            
            // Generate task list HTML
            taskList.innerHTML = filteredTasks.map(task => `
                <div class="task-item bg-gray-50 rounded-lg p-4 mb-3 border border-gray-200 hover:border-gray-300 transition duration-200" data-id="${task.id}">
                    <div class="flex items-start">
                        <!-- Checkbox -->
                        <label class="inline-flex items-center mr-3 cursor-pointer">
                            <input type="checkbox" class="checkbox-custom absolute opacity-0" ${task.completed ? 'checked' : ''}>
                            <span class="checkmark w-5 h-5 border-2 border-gray-300 rounded flex-shrink-0 relative"></span>
                        </label>
                        
                        <!-- Task Content -->
                        <div class="flex-grow">
                            <div class="flex flex-col sm:flex-row sm:items-center justify-between">
                                <div>
                                    <h3 class="font-medium text-gray-800 ${task.completed ? 'line-through text-gray-500' : ''}">${task.text}</h3>
                                    <div class="flex items-center mt-1">
                                        <span class="category-badge text-xs font-medium px-2 py-1 rounded mr-2 ${getCategoryClass(task.category)}">
                                            ${task.category.charAt(0).toUpperCase() + task.category.slice(1)}
                                        </span>
                                        <span class="priority-badge text-xs font-medium px-2 py-1 rounded ${getPriorityClass(task.priority)}">
                                            ${task.priority.charAt(0).toUpperCase() + task.priority.slice(1)} Priority
                                        </span>
                                    </div>
                                </div>
                                
                                <!-- Task Actions -->
                                <div class="task-actions opacity-0 transition-opacity duration-200 flex space-x-2 mt-2 sm:mt-0">
                                    <button class="edit-btn text-gray-500 hover:text-blue-600 p-1">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="delete-btn text-gray-500 hover:text-red-600 p-1">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
            
            // Attach event listeners to dynamically created elements
            attachTaskEventListeners();
        }

        // Attach event listeners to task elements
        function attachTaskEventListeners() {
            // Checkbox toggle
            document.querySelectorAll('.checkbox-custom').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const taskId = parseInt(this.closest('.task-item').dataset.id);
                    toggleTaskCompletion(taskId);
                });
            });
            
            // Delete button
            document.querySelectorAll('.delete-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const taskId = parseInt(this.closest('.task-item').dataset.id);
                    deleteTask(taskId);
                });
            });
            
            // Edit button (double-click task to edit)
            document.querySelectorAll('.task-item').forEach(taskElement => {
                const taskId = parseInt(taskElement.dataset.id);
                const taskTextElement = taskElement.querySelector('h3');
                
                taskTextElement.addEventListener('dblclick', () => {
                    editTask(taskId, taskTextElement);
                });
                
                // Also add click event to edit button
                const editBtn = taskElement.querySelector('.edit-btn');
                if (editBtn) {
                    editBtn.addEventListener('click', () => {
                        editTask(taskId, taskTextElement);
                    });
                }
            });
        }

        // Toggle task completion
        function toggleTaskCompletion(taskId) {
            const taskIndex = tasks.findIndex(task => task.id === taskId);
            if (taskIndex !== -1) {
                tasks[taskIndex].completed = !tasks[taskIndex].completed;
                saveTasks();
                renderTasks();
                updateStats();
            }
        }

        // Delete task
        function deleteTask(taskId) {
            if (confirm('Are you sure you want to delete this task?')) {
                tasks = tasks.filter(task => task.id !== taskId);
                saveTasks();
                renderTasks();
                updateStats();
            }
        }

        // Edit task
        function editTask(taskId, taskTextElement) {
            const task = tasks.find(task => task.id === taskId);
            if (!task) return;
            
            const newText = prompt('Edit your task:', task.text);
            if (newText !== null && newText.trim() !== '') {
                task.text = newText.trim();
                saveTasks();
                renderTasks();
            }
        }

        // Filter tasks
        filterButtons.forEach(button => {
            button.addEventListener('click', () => {
                // Update active filter button
                filterButtons.forEach(btn => {
                    btn.classList.remove('bg-emerald-100', 'text-emerald-700');
                    btn.classList.add('bg-gray-100', 'text-gray-700', 'hover:bg-gray-200');
                });
                
                button.classList.remove('bg-gray-100', 'text-gray-700', 'hover:bg-gray-200');
                button.classList.add('bg-emerald-100', 'text-emerald-700');
                
                // Set current filter and re-render
                currentFilter = button.dataset.filter;
                renderTasks();
            });
        });

        // Clear completed tasks
        clearCompletedBtn.addEventListener('click', () => {
            const completedCount = tasks.filter(task => task.completed).length;
            if (completedCount === 0) {
                alert('No completed tasks to clear');
                return;
            }
            
            if (confirm(`Are you sure you want to clear ${completedCount} completed task(s)?`)) {
                tasks = tasks.filter(task => !task.completed);
                saveTasks();
                renderTasks();
                updateStats();
            }
        });

        // Update statistics
        function updateStats() {
            const total = tasks.length;
            const completed = tasks.filter(task => task.completed).length;
            const remaining = total - completed;
            const completionRate = total > 0 ? Math.round((completed / total) * 100) : 0;
            
            totalTasksElement.textContent = total;
            completedTasksElement.textContent = completed;
            completionRateElement.textContent = `${completionRate}%`;
            progressBar.style.width = `${completionRate}%`;
            tasksRemainingElement.textContent = remaining;
        }

        // Save tasks to localStorage
        function saveTasks() {
            localStorage.setItem('tasks', JSON.stringify(tasks));
        }

        // Load tasks from localStorage
        function loadTasks() {
            const storedTasks = localStorage.getItem('tasks');
            if (storedTasks) {
                tasks = JSON.parse(storedTasks);
                renderTasks();
            }
        }

        // Helper functions for styling
        function getCategoryClass(category) {
            switch(category) {
                case 'work': return 'bg-blue-100 text-blue-800';
                case 'personal': return 'bg-purple-100 text-purple-800';
                case 'shopping': return 'bg-indigo-100 text-indigo-800';
                case 'health': return 'bg-pink-100 text-pink-800';
                default: return 'bg-gray-100 text-gray-800';
            }
        }

        function getPriorityClass(priority) {
            switch(priority) {
                case 'high': return 'bg-red-100 text-red-800';
                case 'medium': return 'bg-yellow-100 text-yellow-800';
                case 'low': return 'bg-gray-100 text-gray-800';
                default: return 'bg-gray-100 text-gray-800';
            }
        }
    </script>
    <!-- JavaScript -->
    <script src="todo.js"></script>
</body>
</html>